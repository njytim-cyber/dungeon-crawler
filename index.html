<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Dungeon Crawler RPG</title>
  <meta name="description"
    content="A 2D top-down dungeon crawler RPG with 100 floors, 9 character classes, and procedurally generated dungeons.">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>

<body>
  <canvas id="gameCanvas"></canvas>

  <!-- Floor Transition Overlay -->
  <div id="floor-transition" class="hidden">
    <div id="floor-transition-text">Floor 1</div>
  </div>

  <!-- Damage Flash Overlay -->
  <div id="damage-flash" class="hidden"></div>

  <!-- HUD Overlay -->
  <div id="hud" class="hidden">
    <div id="hud-top">
      <div id="hud-stats">
        <div id="health-bar-container">
          <div id="health-bar"></div>
          <span id="health-text">100/100</span>
        </div>
        <div id="xp-bar-container">
          <div id="xp-bar"></div>
          <span id="xp-text">XP: 0/100</span>
        </div>
        <div id="hud-info-row">
          <span id="level-text">Lv. 1</span>
          <span id="floor-text">Floor 1</span>
          <span id="gold-text">üí∞ 0</span>
        </div>
      </div>
      <div id="minimap-container">
        <canvas id="minimapCanvas" width="140" height="140"></canvas>
      </div>
    </div>
    <div id="hotbar">
      <div class="hotbar-slot" data-slot="0"><span class="hotbar-key">1</span></div>
      <div class="hotbar-slot" data-slot="1"><span class="hotbar-key">2</span></div>
      <div class="hotbar-slot" data-slot="2"><span class="hotbar-key">3</span></div>
      <div class="hotbar-slot" data-slot="3"><span class="hotbar-key">4</span></div>
      <div class="hotbar-slot" data-slot="4"><span class="hotbar-key">5</span></div>
    </div>
    <div id="message-log"></div>
    <button id="inventory-btn" title="Inventory (I)">üéí</button>
    <button id="save-btn" title="Save Game">üíæ</button>
    <button id="settings-ingame-btn" title="Settings (Esc)">‚öôÔ∏è</button>
  </div>

  <!-- Inventory Panel -->
  <div id="inventory-panel" class="hidden">
    <div id="inventory-header">
      <h2>Inventory</h2>
      <button id="close-inventory">‚úï</button>
    </div>
    <div id="equipment-section">
      <h3>Equipment</h3>
      <div id="equipment-slots">
        <div class="equip-slot" data-slot="weapon"><span class="equip-label">Weapon</span></div>
        <div class="equip-slot" data-slot="armor"><span class="equip-label">Armor</span></div>
        <div class="equip-slot" data-slot="ring"><span class="equip-label">Ring</span></div>
      </div>
    </div>
    <div id="player-stats-panel">
      <h3>Stats</h3>
      <div id="stats-display"></div>
    </div>
    <div id="inventory-grid-section">
      <h3>Items</h3>
      <div id="inventory-grid"></div>
    </div>
    <div id="item-tooltip" class="hidden"></div>
  </div>

  <!-- NPC Dialog -->
  <div id="npc-dialog" class="hidden">
    <div id="npc-dialog-box">
      <div id="npc-name"></div>
      <div id="npc-text"></div>
      <div id="npc-options"></div>
    </div>
  </div>

  <!-- Settings Panel -->
  <div id="settings-panel" class="hidden">
    <div id="settings-content">
      <h2 id="settings-title">‚öôÔ∏è Settings</h2>
      <div class="settings-group">
        <label class="settings-label" data-i18n="lang">Language</label>
        <div class="settings-row">
          <button class="lang-btn" data-lang="en">English</button>
          <button class="lang-btn" data-lang="zh">‰∏≠Êñá</button>
        </div>
      </div>
      <div class="settings-group">
        <label class="settings-label" data-i18n="sfx">Sound Effects</label>
        <div class="settings-row">
          <input type="range" id="sfx-volume" min="0" max="100" value="70">
          <span id="sfx-value">70%</span>
        </div>
      </div>
      <div class="settings-group">
        <label class="settings-label" data-i18n="music">Music</label>
        <div class="settings-row">
          <input type="range" id="music-volume" min="0" max="100" value="50">
          <span id="music-value">50%</span>
        </div>
      </div>
      <div class="settings-group">
        <label class="settings-label" data-i18n="controls">Controls</label>
        <div class="settings-row">
          <button id="ctrl-joystick" class="ctrl-btn active">Joystick</button>
          <button id="ctrl-dpad" class="ctrl-btn">D-Pad</button>
        </div>
      </div>
      <div class="settings-actions">
        <button id="show-tutorial-btn" data-i18n="tutorial_btn">üìñ Tutorial</button>
        <button id="return-hub-btn" class="hidden" data-i18n="hub_btn">üè† Return to Hub</button>
        <button id="close-settings" data-i18n="close">Close</button>
      </div>
    </div>
  </div>

  <!-- Tutorial Overlay -->
  <div id="tutorial-overlay" class="hidden">
    <div id="tutorial-content">
      <div id="tutorial-slide">
        <h2 id="tutorial-heading">Welcome, Adventurer!</h2>
        <p id="tutorial-text">Use WASD or the joystick to move. Click or press Space to attack.</p>
      </div>
      <div id="tutorial-dots"></div>
      <div id="tutorial-actions">
        <button id="tutorial-prev" class="hidden">‚óÄ Back</button>
        <button id="tutorial-next">Next ‚ñ∂</button>
      </div>
    </div>
  </div>

  <!-- Title Screen -->
  <div id="title-screen">
    <div id="title-content">
      <h1 id="game-title">‚öîÔ∏è DUNGEON CRAWLER</h1>
      <p id="game-subtitle">Descend into the depths...</p>
      <div id="class-select">
        <h2>Choose Your Class</h2>
        <div id="class-grid"></div>
        <div id="class-description"></div>
      </div>
      <button id="start-btn" class="hidden">Begin Adventure</button>
      <button id="continue-btn" class="hidden">Continue (Floor <span id="save-floor">1</span>)</button>
      <button id="title-settings-btn">‚öôÔ∏è Settings</button>
    </div>
  </div>

  <!-- Game Over Screen -->
  <div id="gameover-screen" class="hidden">
    <div id="gameover-content">
      <h1>üíÄ YOU DIED</h1>
      <div id="death-stats"></div>
      <button id="retry-btn">Try Again</button>
    </div>
  </div>

  <!-- Victory Screen -->
  <div id="victory-screen" class="hidden">
    <div id="victory-content">
      <h1>üèÜ VICTORY!</h1>
      <p>You conquered all 100 floors!</p>
      <div id="victory-stats"></div>
      <button id="victory-retry-btn">Play Again</button>
    </div>
  </div>

  <!-- Mobile Controls -->
  <div id="mobile-controls" class="hidden">
    <!-- Joystick (default) -->
    <div id="joystick-area">
      <div id="joystick-base">
        <div id="joystick-knob"></div>
      </div>
    </div>
    <!-- D-Pad (toggle) -->
    <div id="dpad" class="hidden">
      <button class="dpad-btn" data-dir="up">‚ñ≤</button>
      <button class="dpad-btn" data-dir="left">‚óÄ</button>
      <button class="dpad-btn" data-dir="right">‚ñ∂</button>
      <button class="dpad-btn" data-dir="down">‚ñº</button>
    </div>
    <div id="action-buttons">
      <button id="mobile-attack" class="action-btn">‚öîÔ∏è</button>
      <button id="mobile-interact" class="action-btn">üí¨</button>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>

</html>